    def image_callback(self, msg):
        try:
            frame = self.bridge.imgmsg_to_cv2(msg, "bgr8")
        except:
            return

        h, w, _ = frame.shape
        roi = frame[int(h * 0.5):h, :]

        left_xs, right_xs = self.detect_rows(roi)

        # ====== DEBUG HIỂN THỊ ROI ======
        if self.show_debug:
            roi_vis = roi.copy()

            # vẽ vùng trái/phải để bạn thấy ROI ngang
            roi_h, roi_w, _ = roi_vis.shape
            left_min = int(roi_w * self.left_min_x_ratio)
            left_max = int(roi_w * self.left_max_x_ratio)
            right_min = int(roi_w * self.right_min_x_ratio)
            right_max = int(roi_w * self.right_max_x_ratio)

            # vẽ 2 vùng trái/phải
            cv2.rectangle(roi_vis, (left_min, 0), (left_max, roi_h-1), (255, 0, 0), 2)
            cv2.rectangle(roi_vis, (right_min, 0), (right_max, roi_h-1), (0, 255, 0), 2)

            # vẽ các điểm line bắt được (nếu có)
            for x in left_xs:
                cv2.line(roi_vis, (x, 0), (x, roi_h-1), (255, 255, 0), 1)
            for x in right_xs:
                cv2.line(roi_vis, (x, 0), (x, roi_h-1), (0, 255, 255), 1)

            cv2.imshow("ROI debug", roi_vis)
            cv2.waitKey(1)
        # ====== HẾT PHẦN DEBUG ======
